extends layout

block content
  .container
    section.section.register.min-vh-100.d-flex.flex-column.align-items-center.justify-content-center.py-4
      .container
        .row.justify-content-center
          .col-lg-6.col-md-6.d-flex.flex-column.align-items-center.justify-content-center
            .d-flex.justify-content-center.py-4
              a.logo.d-flex.align-items-center.w-auto(href='/')
                img(src='assets/img/enko-modern-logo.png' alt='')
                span.d-lg-block.text-success Enko Education
            // End Logo
            .card.mb-3(style="width: 80%")
              .card-body
                  .pt-4.pb-2
                      h5.card-title.text-center.pb-0.fs-4.text-dark One stop employee service
                      p.text-center.small Login with your ENKO Education account
                      .col-4.text-center.d-flex.p-2
                          .input-group.has-validation
                          .input-group.mb-3 
                          .g-signin2(data-onsuccess='onSignIn' data-theme='dark')
              script.
                function onSignIn(googleUser) {
                // Useful data for your client-side scripts:
                //var profile = googleUser.getBasicProfile();
                //console.log("ID: " + profile.getId()); // Don't send this directly to your server!
                //console.log('Full Name: ' + profile.getName());
                //console.log('Given Name: ' + profile.getGivenName());
                //console.log('Family Name: ' + profile.getFamilyName());
                //console.log("Image URL: " + profile.getImageUrl());
                //console.log("Email: " + profile.getEmail());
                // The ID token you need to pass to your backend:
                var id_token = googleUser.getAuthResponse().id_token;
                console.log("ID Token: " + id_token);
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/entryForm');
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.onload = function() {
                    console.log('Signed in as: ' + xhr.responseText);
                    if(xhr.responseText == 'success'){
                        signOut();
                        location.assign('/profile')
                    }
                };
                xhr.send(JSON.stringify({token : id_token}));
                }

                                      
                                